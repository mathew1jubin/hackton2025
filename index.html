<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Writer SIMULATOR</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        :root {
            bg-color: hsl(0, 0%, 100%);
        }
        body {
            background-color: var(bg-color);
            transition: background-color 0.5s ease-in-out;
            font-family: 'Inter', sans-serif;
        }
        .tab-content { display: none; }
        .tab-content.active { display: block; }
    </style>
</head>
<body class="flex flex-col items-center justify-center min-h-screen text-white p-4">

    <!-- Tabs Navigation -->
    <div class="flex space-x-4 mb-6">
        <button id="tabTyping" class="px-4 py-2 bg-blue-500 rounded">Typing</button>
        <button id="tabResult" class="px-4 py-2 bg-gray-600 rounded">Results</button>
    </div>

    <!-- Tab 1: Typing -->
    <div id="typingTab" class="tab-content active max-w-4xl w-full p-8 bg-gray-800 rounded-xl shadow-2xl flex flex-col items-center">
        <h1 class="text-4xl font-extrabold mb-4 text-center">TYPING SPEED SIMULATOR</h1>
        <p class="text-gray-400 text-lg text-center mb-8">Start typing below to see the colors change with your speed.</p>

        <textarea
            style="color: black;"
            id="typingArea"
            rows="2"
            class="w-full p-6 text-xl bg-black-400 rounded-lg shadow-inner border-2 border-gray-700 focus:border-blue-500 focus:outline-none resize-none"
            placeholder="Type here..."
            autofocus
        ></textarea>

        <div class="mt-8 text-2xl font-semibold text-center">
            <span class="text-gray-400">Typing Speed: </span>
            <span id="speedDisplay" class="text-blue-400 font-bold">0 ms per keystroke</span>
        </div>
    </div>

    <!-- Tab 2: Results -->
    <div id="resultTab" class="tab-content max-w-4xl w-full p-8 bg-gray-800 rounded-xl shadow-2xl flex flex-col items-center">
        <h1 class="text-4xl font-extrabold mb-4 text-center">Your Typing Results</h1>
        <p class="text-lg text-gray-400 mb-6">Hereâ€™s how you performed:</p>
        <ul class="text-xl space-y-3">
            <li><span class="text-gray-300">Total Keystrokes:</span> <span id="resultKeystrokes" class="text-white font-bold">0</span></li>
            <li><span class="text-gray-300">Average Speed:</span> <span id="resultAverage" class="text-white font-bold">0 ms</span></li>
            <li><span class="text-gray-300">Fastest Speed:</span> <span id="resultFastest" class="text-white font-bold">0 ms</span></li>
            <li><span class="text-gray-300">Slowest Speed:</span> <span id="resultSlowest" class="text-white font-bold">0 ms</span></li>
        </ul>
    </div>

    <script>
        const body = document.body;
        const typingArea = document.getElementById('typingArea');
        const speedDisplay = document.getElementById('speedDisplay');

        // Result elements
        const resultKeystrokes = document.getElementById('resultKeystrokes');
        const resultAverage = document.getElementById('resultAverage');
        const resultFastest = document.getElementById('resultFastest');
        const resultSlowest = document.getElementById('resultSlowest');

        let lastKeyPressTime = 0;
        let speed = 0;
        let speeds = [];
        let totalKeystrokes = 0;

        typingArea.addEventListener('keyup', () => {
            const currentTime = new Date().getTime();

            if (lastKeyPressTime !== 0) {
                const timeDelta = currentTime - lastKeyPressTime;
                speed = timeDelta;
                speeds.push(speed);
                totalKeystrokes++;

                speedDisplay.textContent = `${speed} ms per keystroke`;

                // --- Color Logic ---
                const fastTypingThreshold = 150;
                const slowTypingThreshold = 600;
                let hue;

                if (speed <= fastTypingThreshold && speed > 0) {
                    hue = 0;
                    speedDisplay.classList.replace('text-blue-400', 'text-red-400');
                } else if (speed > slowTypingThreshold) {
                    hue = 240;
                    speedDisplay.classList.replace('text-red-400', 'text-blue-400');
                } else {
                    const speedRange = slowTypingThreshold - fastTypingThreshold;
                    const normalizedSpeed = (speed - fastTypingThreshold) / speedRange;
                    hue = 240 - (normalizedSpeed * 240);
                    speedDisplay.classList.replace('text-red-400', 'text-blue-400');
                }
                body.style.backgroundColor = `hsl(${hue}, 50%, 20%)`;
            }
            lastKeyPressTime = currentTime;
        });

        // Tab Switching
        const typingTabBtn = document.getElementById('tabTyping');
        const resultTabBtn = document.getElementById('tabResult');
        const typingTab = document.getElementById('typingTab');
        const resultTab = document.getElementById('resultTab');

        typingTabBtn.addEventListener('click', () => {
            typingTab.classList.add('active');
            resultTab.classList.remove('active');
            typingTabBtn.classList.replace('bg-gray-600', 'bg-blue-500');
            resultTabBtn.classList.replace('bg-blue-500', 'bg-gray-600');
        });

        resultTabBtn.addEventListener('click', () => {
            typingTab.classList.remove('active');
            resultTab.classList.add('active');
            resultTabBtn.classList.replace('bg-gray-600', 'bg-blue-500');
            typingTabBtn.classList.replace('bg-blue-500', 'bg-gray-600');

            // Calculate results
            if (speeds.length > 0) {
                const avgSpeed = Math.round(speeds.reduce((a, b) => a + b, 0) / speeds.length);
                const fastest = Math.min(...speeds);
                const slowest = Math.max(...speeds);

                resultKeystrokes.textContent = totalKeystrokes;
                resultAverage.textContent = `${avgSpeed} ms`;
                resultFastest.textContent = `${fastest} ms`;
                resultSlowest.textContent = `${slowest} ms`;
            }
        });
    </script>

</body>
</html>